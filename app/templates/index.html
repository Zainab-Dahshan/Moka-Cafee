{% extends "base.html" %}

{% block title %}Welcome to CaféLuxe ☕{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section py-5 text-center text-white">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <img src="{{ url_for('static', filename='images/logo.png') }}" alt="CaféLuxe" class="img-fluid mb-4 logo-img">
                <h1 class="display-4 fw-bold mb-4">Welcome to CaféLuxe</h1>
                <p class="lead mb-5">Experience the perfect blend of taste and comfort with our handcrafted coffee and delicious treats.</p>
                <div class="d-grid gap-3 d-sm-flex justify-content-sm-center">
                    <a href="{{ url_for('main.menu') }}" class="btn btn-light btn-lg px-4 me-sm-3">View Menu</a>
                    <a href="{{ url_for('main.order') }}" class="btn btn-outline-light btn-lg px-4">Order Now</a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Featured Menu Items -->
<section class="py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">Our Specialties</h2>
            <p class="text-muted">Discover our most popular items</p>
        </div>
        <div class="row g-4">
            {% for item in featured_items %}
            <div class="col-md-6 col-lg-3">
                <div class="card h-100 menu-item-card">
                    {% if item.image_url %}
                    <img src="{{ url_for('static', filename=item.image_url) }}" class="card-img-top" alt="{{ item.name }}">
                    {% else %}
                    <div class="placeholder-image">
                        <i class="fas fa-coffee"></i>
                    </div>
                    {% endif %}
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-start mb-2">
                            <h5 class="card-title mb-0">{{ item.name }}</h5>
                            <span class="badge bg-primary">EGP {{ "%.2f"|format(item.price) }}</span>
                        </div>
                        <p class="card-text text-muted small">{{ item.description|truncate(80) }}</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="badge bg-light text-dark">{{ item.category }}</span>
                            <button class="btn btn-sm btn-outline-primary add-to-cart" data-id="{{ item.id }}">
                                <i class="fas fa-plus"></i> Add to Order
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="text-center mt-5">
            <a href="{{ url_for('main.menu') }}" class="btn btn-outline-primary">View Full Menu</a>
        </div>
    </div>
</section>

<!-- About Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 mb-4 mb-lg-0">
                <img src="https://images.unsplash.com/photo-1447933601403-0c6688de566e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" 
                     alt="About CaféLuxe" class="img-fluid rounded shadow">
            </div>
            <div class="col-lg-6">
                <h2 class="section-title">Our Story</h2>
                <p class="lead">A passion for perfection in every cup.</p>
                <p>Founded in 2023, CaféLuxe has been serving the finest coffee and desserts to our valued customers. We source our beans from sustainable farms and roast them to perfection to bring out their unique flavors.</p>
                <p>Our cozy atmosphere and friendly staff make us the perfect spot for your morning coffee, business meetings, or relaxing afternoons with friends.</p>
                <a href="#" class="btn btn-primary mt-3">Learn More</a>
            </div>
        </div>
    </div>
</section>

<!-- Testimonials -->
<section class="py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">What Our Customers Say</h2>
            <p class="text-muted">Don't just take our word for it</p>
        </div>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-body text-center p-4">
                        <div class="mb-3">
                            <i class="fas fa-quote-left fa-2x text-muted"></i>
                        </div>
                        <p class="card-text">"The best coffee in town! I come here every morning before work. The atmosphere is amazing and the staff is super friendly."</p>
                        <div class="mt-4">
                            <img src="https://randomuser.me/api/portraits/women/32.jpg" class="rounded-circle mb-2" width="60" alt="Customer">
                            <h6 class="mb-0">Sarah Johnson</h6>
                            <small class="text-muted">Regular Customer</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-body text-center p-4">
                        <div class="mb-3">
                            <i class="fas fa-quote-left fa-2x text-muted"></i>
                        </div>
                        <p class="card-text">"I love their cappuccino and the chocolate cake is to die for! Perfect place to relax and enjoy some quality time."</p>
                        <div class="mt-4">
                            <img src="https://randomuser.me/api/portraits/men/45.jpg" class="rounded-circle mb-2" width="60" alt="Customer">
                            <h6 class="mb-0">Michael Brown</h6>
                            <small class="text-muted">Coffee Enthusiast</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-body text-center p-4">
                        <div class="mb-3">
                            <i class="fas fa-quote-left fa-2x text-muted"></i>
                        </div>
                        <p class="card-text">"Great place to work remotely. Fast WiFi, delicious coffee, and a quiet atmosphere. Highly recommended!"</p>
                        <div class="mt-4">
                            <img src="https://randomuser.me/api/portraits/women/68.jpg" class="rounded-circle mb-2" width="60" alt="Customer">
                            <h6 class="mb-0">Emily Davis</h6>
                            <small class="text-muted">Digital Nomad</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Call to Action -->
<section class="cta-section py-5 text-white">
    <div class="container text-center">
        <h2 class="mb-4">Ready to taste our coffee?</h2>
        <p class="lead mb-4">Visit us today or place your order online</p>
        <a href="{{ url_for('main.order') }}" class="btn btn-light btn-lg me-3">Order Now</a>
        <a href="#" class="btn btn-outline-light btn-lg">Contact Us</a>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
// Add to cart functionality
document.addEventListener('DOMContentLoaded', function() {
    const addToCartButtons = document.querySelectorAll('.add-to-cart');
    const cartCount = document.getElementById('cart-count');
    
    addToCartButtons.forEach(button => {
        button.addEventListener('click', function() {
            const itemId = this.getAttribute('data-id');
            
            fetch('/add_to_cart/' + itemId, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-Requested-With': 'XMLHttpRequest'
                },
                body: JSON.stringify({})
            })
            .then(response => response.json())
            .then(data => {
                // Update cart count
                cartCount.textContent = data.cart_count;
                
                // Show success message
                const toast = new bootstrap.Toast(document.getElementById('addedToCartToast'));
                toast.show();
            })
            .catch(error => {
                console.error('Error:', error);
            });
        });
    });
});
</script>

<!-- Toast Notification -->
<div class="toast-container">
    <div id="addedToCartToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header">
            <strong class="me-auto">Success</strong>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body">
            <i class="fas fa-check-circle text-success me-2"></i> Item added to your order!
        </div>
    </div>
</div>
{% endblock %}
